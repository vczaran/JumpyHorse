!function(){"use strict";!function(){class t{constructor(t,e,s,i){this.gravity=.3,this.x=t,this.y=e,this.speedX=0,this.speedY=0,this.width=s,this.height=i,this.counter=0,this.frameIndex=0,this.horses=document.getElementById("running-horse").children}drawHorse(){const t=document.getElementById("background").getContext("2d");this.counter+=1,this.counter%6==0&&(this.frameIndex+=1,5===this.frameIndex&&(this.frameIndex=0)),t.drawImage(this.horses[this.frameIndex],this.x,this.y,this.width,this.height),this.move(),this.y>360&&(this.y=360)}move(){this.y+=this.speedY,this.speedY+=this.gravity}jump(){this.speedY=-10}}class e{constructor(t,e,s,i){this.x=t,this.y=e,this.speedX=3,this.width=s,this.height=i,this.fencepost=document.getElementById("fencepost")}drawObstacle(){document.getElementById("background").getContext("2d").drawImage(this.fencepost,this.x,this.y,this.width,this.height),this.moveObstacle()}moveObstacle(){this.x-=this.speedX}}class s{constructor(){this.bg=new Image,"vczaran.github.io"===window.location.host?this.bg.src="/JumpyHorse/assets/images/longfarm.png":this.bg.src="/assets/images/longfarm.png",this.x=0}drawBackground(){document.getElementById("background").getContext("2d").drawImage(this.bg,this.x-=3,0,this.bg.width,490),this.x<=-4360&&(this.x=0)}}class i{constructor(i){this.audio=document.getElementById("gallop"),this.over=!1,this.dimensions={width:i.width,height:i.height},this.bg=new s,this.score=0,this.horse=new t(20,360,100,70),this.obstacles=[new e(900,360,30,70)],this.intervalID=setInterval((()=>{this.obstacles.push(new e(900,360,30,70)),this.obstacles[0].x<=0&&this.obstacles.shift()}),7e3),window.addEventListener("keydown",(t=>{"Space"===t.code&&360===this.horse.y&&this.horse.jump()}))}draw(t){if(!this.over){const e=document.getElementById("mute");let s=!0;e.addEventListener("click",(()=>{s=!s,s?this.audio.pause():this.audio.play()})),t.clearRect(0,0,this.dimensions.width,this.dimensions.height),this.bg.drawBackground(),this.horse.drawHorse(),this.obstacles.forEach((t=>{t.drawObstacle()})),this.drawScore(),requestAnimationFrame((()=>{this.draw(t),this.collision()}))}}collision(){const t=this.obstacles[0],e=this.horse;t.x>e.x&&t.x<e.x+e.width&&t.x+t.width>e.x&&t.x+t.width<e.x+e.width&&e.y+e.height>=t.y&&e.y+e.height>=t.y-t.height?this.gameOver():this.scoreUp()}scoreUp(){this.horse.x>this.obstacles[0].x&&this.obstacles[0].x>17&&(this.score+=1)}drawScore(){const t=document.getElementById("background").getContext("2d");this.x=435,this.y=60,t.font="40pt PixelSans",t.fillStyle="white",t.fillText(this.score,this.x,this.y)}gameOver(){this.audio.pause(),this.over=!0,clearInterval(this.intervalID);const t=document.getElementById("background"),e=t.getContext("2d"),s=document.getElementById("endModal");s.style.display="block",document.getElementById("restart-button").onclick=function(){this.over=!1,new i(t).draw(e),s.style.display="none"}}}class h{constructor(t){this.ctx=t.getContext("2d"),this.dimensions={width:t.width,height:t.height},this.view=new i(t)}startGame(t){t.draw(this.ctx)}}document.addEventListener("DOMContentLoaded",(()=>{const t=document.getElementById("background"),e=new h(t),s=document.getElementById("startModal");s.style.display="block",document.getElementById("start-button").onclick=function(){e.startGame(e.view),s.style.display="none"}}))}()}();
//# sourceMappingURL=main.js.map